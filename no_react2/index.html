<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <link rel="stylesheet" href="jquery.hortree.min.css">
</head>
<body>

<p>Gespr√§ch - Zeitstrahl illustriert</p>
<input type="range" min="0" max="4" value="0" class="slider" onchange="changeValue" id="myRange">

<div id="my-container"></div>
<script src="https://code.jquery.com/jquery-1.12.4.min.js"
        integrity="sha256-ZosEbRLbNQzLpnKIkEdrPv7lOy9C27hHQ+Xp8a4MxAQ="
        crossorigin="anonymous"></script>
<script src="jquery.line.js" type="text/javascript"></script>
<script src="dist/jquery.hortree.js" type="text/javascript"></script>
<style>

    .slider {
        -webkit-appearance: none;
        width: 100%;
        height: 25px;
        background: #d3d3d3;
        outline: none;
        opacity: 0.7;
        -webkit-transition: .2s;
        transition: opacity .2s;
    }

    .slider:hover {
        opacity: 1;
    }

    .slider::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 25px;
        height: 25px;
        background: #04AA6D;
        cursor: pointer;
    }

    .slider::-moz-range-thumb {
        width: 25px;
        height: 25px;
        background: #04AA6D;
        cursor: pointer;
    }

    .classRed {
        color: red
    }

    .classGrey {
        color: rgba(124, 124, 124, 0.72);
    }

    .classBlack {
        color: black
    }

</style>

<script type="text/javascript">

    let iterationData = 0;
    let iterationDataMax = 2;
    let globalData = [];

    $(document).ready(function(){

        function inverseColors() {
                var css = 'html {-webkit-filter: invert(100%);' +
                        '-moz-filter: invert(100%);' +
                        '-o-filter: invert(100%);' +
                        '-ms-filter: invert(100%); }',

                    head = document.getElementsByTagName('head')[0],
                    style = document.createElement('style');
                if (!window.counter) { window.counter = 1;} else  { window.counter ++;
                    if (window.counter % 2 == 0) { var css ='html {-webkit-filter: invert(0%); -moz-filter:    invert(0%); -o-filter: invert(0%); -ms-filter: invert(0%); }'}
                };

                style.type = 'text/css';
                if (style.styleSheet){
                    style.styleSheet.cssText = css;
                } else {
                    style.appendChild(document.createTextNode(css));
                }
             head.appendChild(style);
        }
       // inverseColors();

        document.getElementById('myRange').addEventListener('change', (event) => {
            // console.log(globalData);
            //
            //     for (var i=0; i<globalData[0].children.length; i++){
            //         console.log(globalData[0].children[i])
            //         //globalData[event.target.value].className = "classRed";
            //     }
            //
            //
            // $('#my-container').hortree({
            //     data: globalData
            // });
        });

        document.getElementById('myRange').oninput = function(event) {
            console.log(globalData);
            for (var i=0; i<globalData[0].children.length; i++) {
                console.log(globalData[0].children[i])
                globalData[0].children[i].className = "classRed";
            }
            $('#my-container').hortree({
                data: globalData
            });
        };

        function oneSecondFunction(value) {
            fetch('./data/data' + value + '.json')
                .then(response => { return response.json(); })
                .then(data => {
                        console.log(data)
                         globalData = data;
                        $('#my-container').hortree({
                            data: data
                        });
                        iterationData++;
                        if (iterationDataMax > iterationData){
                            iterationData = 0;
                        }
                    }
                )
                .catch(error => console.error('Error:', error));
        }
        oneSecondFunction(0);

        $('#my-container').hortree({
            data: globalData
        });
    })

</script>

</body>


</html>
